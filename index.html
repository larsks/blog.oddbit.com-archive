<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>The Odd Bit &middot; The Odd Bit</title>
        <meta name="description" content="One of these things is not like the others">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.55.5" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="stylesheet" href="/dist/styles.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        
<!-- alternate output formats -->

<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="The Odd Bit" />
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="The Odd Bit" />

        
        
    </head>
    <body>
        

        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="The Odd Bit" href="/">The Odd Bit</a>
                            </h1>
                        
                        <a class="button-square" href="/rss.xml"><i class="fa fa-rss"></i></a>
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" title="Twitter" href="https://twitter.com/larsks" rel="me">
                                <i class="fa fa-twitter"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/larsks" rel="me">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Stack Overflow" title="Stack Overflow" href="https://stackoverflow.com/users/147356/larsks" rel="me">
                                <i class="fa fa-stack-overflow"></i>
                            </a>
                        
                        
                        
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a title="Home" href="/">Home</a>
    </li>

    <li class="site-nav-item">
        <a title="GPG Key" href="/about/gpg">GPG Key</a>
    </li>

    <li class="site-nav-item">
        <a title="Tags" href="/tags">Tags</a>
    </li>

                    </ul>
                </div>
            </header>

            <div id="container">


<div id="post-index" class="container" itemscope="" itemtype="https://schema.org/Blog">
    


    <ol class="post-list">
        
        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-05-07-new-comment-system/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">New comment system</h4>
        <time class="post-stub-date" datetime="2019-05-07">Published Tue, May 7, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    As long as I&rsquo;m switching site generators, it seems like a good idea to refresh the comment system as well. I&rsquo;ve been using Disqus for a while, since when I started it was one of the only games in town. There are now alternatives of different sorts, and one in particular caught my eye: Utterances uses GitHub issues for storing comments, which seems like a fantastic idea.
That means that comments will finally be stored in the same place as the blog content, which I think is a happy state of affairs.
    <span class="post-stub-more"><a href="/post/2019-05-07-new-comment-system/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-05-07-unpacking-a-python-regular-exp/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">Unpacking a Python regular expression</h4>
        <time class="post-stub-date" datetime="2019-05-07">Published Tue, May 7, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    I recently answered a question from Harsha Nalore on StackOverflow that involved extracting output a command sent to a BigIP device of some sort. My solution &ndash; which I claim to be functional, but probably not optimal &ndash; involved writing an Ansible filter module to parse the output. That filter made use of a complex-looking regular expression. Harsha asked for some details on that regular expression works, and the existing StackOverflow answer didn&rsquo;t really seem the write place for that: so, here we are.
    <span class="post-stub-more"><a href="/post/2019-05-07-unpacking-a-python-regular-exp/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-05-06-new-static-site-generator/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">New static site generator</h4>
        <time class="post-stub-date" datetime="2019-05-06">Published Mon, May 6, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    I&rsquo;ve switched my static site generator from Pelican to Hugo. I&rsquo;ve tried to ensure that all the old links continue to work correctly, but if you notice anything missing or otherwise not working as intended, please let me know by opening an issue. Thanks!
    <span class="post-stub-more"><a href="/post/2019-05-06-new-static-site-generator/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-04-26-adding-support-for-privilege-e/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">Adding support for privilege escalation to Ansible&#39;s docker connection driver</h4>
        <time class="post-stub-date" datetime="2019-04-26">Published Fri, Apr 26, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    I often use Docker to test out Ansible playbooks. While normally that works great, I recently ran into an unexpected problem with privilege escalation. Given a simple playbook like this:
--- - hosts: all gather_facts: false become: true tasks: - ping:  And an inventory like this:
all: vars: ansible_user: example ansible_connection: docker hosts: server1: ansible_host: sudostuff_server1_1 server2: ansible_host: sudostuff_server2_1 server3: ansible_host: sudostuff_server3_1  And containers with sudo configured to require a password, Ansible would fail like this (note that I&rsquo;ve configured Ansible to use the debug plugin for stdout_callback):
    <span class="post-stub-more"><a href="/post/2019-04-26-adding-support-for-privilege-e/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-04-25-writing-ansible-filter-plugins/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">Writing Ansible filter plugins</h4>
        <time class="post-stub-date" datetime="2019-04-25">Published Thu, Apr 25, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    I often see questions from people who are attemping to perform complex text transformations in their Ansible playbooks. While I am a huge fan of Ansible, data transformation is not one of its strong points. For example, this past week someone asked a question on Stack Overflow in which they were attempting to convert the output of the keytool command into a list of dictionaries. The output of the keytool -list -v command looks something like this:
    <span class="post-stub-more"><a href="/post/2019-04-25-writing-ansible-filter-plugins/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-02-24-docker-build-learns-about-secr/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">Docker build learns about secrets and ssh agent forwarding</h4>
        <time class="post-stub-date" datetime="2019-02-24">Published Sun, Feb 24, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    A common problem for folks working with Docker is accessing resources which require authentication during the image build step. A particularly common use case is getting access to private git repositories using ssh key-based authentication. Until recently there hasn&rsquo;t been a great solution:
 you can embed secrets in your image, but now you can&rsquo;t share the image with anybody. you can use build arguments, but this requires passing in an unenecrypted private key on the docker build command line, which is suboptimal for a number of reasons you can perform all the steps requiring authentication at runtime, but this can needlessly complicate your container startup process.
    <span class="post-stub-more"><a href="/post/2019-02-24-docker-build-learns-about-secr/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-02-11-in-which-i-pebkac-so-you-dont-/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">In which I PEBKAC so you don&#39;t have to</h4>
        <time class="post-stub-date" datetime="2019-02-11">Published Mon, Feb 11, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    Say you have a simple bit of code:
#include &lt;avr/io.h&gt; #include &lt;util/delay.h&gt; #define LED_BUILTIN _BV(PORTB5) int main(void) { DDRB |= LED_BUILTIN; while (1) { PORTB |= LED_BUILTIN; // turn on led _delay_ms(1000); // delay 1s PORTB &amp;= ~LED_BUILTIN; // turn off led _delay_ms(1000); // delay 1s } }  You have a Makefile that compiles that into an object (.o) file like this:
avr-gcc -mmcu=atmega328p -DF_CPU=16000000 -Os -c blink.c  If you were to forget to set the device type when compiling your .
    <span class="post-stub-more"><a href="/post/2019-02-11-in-which-i-pebkac-so-you-dont-/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-02-01-atomicblock-magic-in-avrlibc/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">ATOMIC_BLOCK magic in avr-libc</h4>
        <time class="post-stub-date" datetime="2019-02-01">Published Fri, Feb 1, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    The AVR C library, avr-libc, provide an ATOMIC_BLOCK macro that you can use to wrap critical sections of your code to ensure that interrupts are disabled while the code executes. At high level, the ATOMIC_BLOCK macro (when called using ATOMIC_FORCEON) does something like this:
cli(); ...your code here... seti();  But it&rsquo;s more than that. If you read the documentation for the macro, it says:
 Creates a block of code that is guaranteed to be executed atomically.
    <span class="post-stub-more"><a href="/post/2019-02-01-atomicblock-magic-in-avrlibc/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-01-28-avr-gcc-short-enums/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">AVR micro-optimization: Avr-gcc and --short-enums</h4>
        <time class="post-stub-date" datetime="2019-01-28">Published Mon, Jan 28, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    How big is an enum? I noticed something odd while browsing through the assembly output of some AVR C code I wrote recently. In the code, I have the following expression:
int main() { setup(); while (state != STATE_QUIT) { loop(); } }  Here, state is a variable of type enum STATE, which looks something like this (not exactly like this; there are actually 19 possible values but I didn&rsquo;t want to clutter this post with unnecessary code listings):
    <span class="post-stub-more"><a href="/post/2019-01-28-avr-gcc-short-enums/">(more)</a></span>
    </p>
    
</li>


        
            <li class="post-stub" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting">
    <a href="/post/2019-01-28-losing-malloc/" itemprop="url" title="Go to post detail">
        <h4 class="post-stub-title" itemprop="name">AVR micro-optimization: Losing malloc</h4>
        <time class="post-stub-date" datetime="2019-01-28">Published Mon, Jan 28, 2019</time>
        
    </a>

    
    <p class="post-stub-summary">
    Pssst! Hey&hellip;hey, buddy, wanna get an extra KB for cheap?
When write OO-style code in C, I usually start with something like the following, in which I use malloc() to allocate memory for a variable of a particular type, perform some initialization actions, and then return it to the caller:
Button *button_new(uint8_t pin, uint8_t poll_freq) { Button *button = (Button *)malloc(sizeof(Button)); // do some initialization stuff return button; }  And when initially writing pipower, that&rsquo;s exactly what I did.
    <span class="post-stub-more"><a href="/post/2019-01-28-losing-malloc/">(more)</a></span>
    </p>
    
</li>


        
    </ol>

    <div class="post-navigation">
        

    <nav class="pagination" role="navigation">
        <span class="page-number">Page 1 of 18</span>
        
        
            <a class="older-posts" href="/page/2/">Older Posts &rarr;</a>
        
    </nav>

    </div>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a title="The Odd Bit" href="/">The Odd Bit</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2019 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="/js/jquery-1.11.3.min.js"></script>
        <script src="/js/jquery.fitvids.js"></script>
        
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        
        
        <script src="/js/scripts.js"></script>
    </body>
</html>

